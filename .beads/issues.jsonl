{"id":"vibex-91a","title":"Settlement Management Game MVP","description":"Vibex is an idle/incremental settlement management game built with Phoenix LiveView. Players build a settlement, recruit armies, and send them on missions while progressing through stages that unlock new features.\n\n## Phase Overview\n- Phase 1: UI Mockup (all visual, no persistence)\n- Phase 2: Core Backend (persistence + live resources)\n- Phase 3: Interactivity (building/unit/mission mechanics)\n- Phase 4: Polish (new player experience + notifications)","status":"open","priority":2,"issue_type":"epic","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:44:33.934303912+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:44:33.934303912+01:00","external_ref":"prd:./docs/tasks/prd-settlement-management-game.md"}
{"id":"vibex-91a.1","title":"US-001: Create SettlementLive Overview Tab (Mock)","description":"As a player, I want to see my settlement overview so that I understand my current state.\n\n## Acceptance Criteria\n- [ ] Create `VibexWeb.SettlementLive` LiveView\n- [ ] Display resource bars with mock amounts and capacities\n- [ ] Display mock production rates per resource\n- [ ] Display mock progression stage\n- [ ] Use hardcoded assigns (no backend integration)\n- [ ] Smoke test: verify resource bars, production rates, stage are visible\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n## Mock Data\n```elixir\n%{\n  resources: %{gold: 500, wood: 300, stone: 200, food: 400, iron: 0, crystal: 0},\n  storage: %{gold: 1000, wood: 1000, stone: 1000, food: 1000, iron: 500, crystal: 500},\n  production: %{gold: 5, wood: 10, stone: 8, food: 12, iron: 0, crystal: 0},\n  stage: 1\n}\n```","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:44:55.512801154+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:44:55.512801154+01:00","dependencies":[{"issue_id":"vibex-91a.1","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:44:55.516158837+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.10","title":"US-012: Create Mission and MissionAssignment Schemas","description":"As a developer, I want Mission schemas so that missions and player progress can be stored.\n\n## Acceptance Criteria\n- [ ] Create `Vibex.Missions.Mission` schema with `name`, `tier`, `min_units`, `duration_seconds`, `rewards`, `difficulty`, `type`\n- [ ] Create `Vibex.Missions.MissionAssignment` schema with `settlement_id`, `mission_id`, `units`, `started_at`, `completes_at`, `status`\n- [ ] Create `Vibex.Missions` context module\n- [ ] Add migrations for `missions` and `mission_assignments` tables\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:41.093532537+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:41.093532537+01:00","dependencies":[{"issue_id":"vibex-91a.10","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:41.097262173+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.10","depends_on_id":"vibex-91a.9","type":"blocks","created_at":"2026-02-15T15:49:30.094195431+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.11","title":"US-013: Implement Building Construction","description":"As a player, I want to construct buildings so that my settlement grows.\n\n## Acceptance Criteria\n- [ ] Add `build/3` to SettlementServer (user_id, building_type, position)\n- [ ] Construction deducts resources from settlement\n- [ ] Construction fails if insufficient resources\n- [ ] Construction fails if position already occupied\n- [ ] Building persists to database\n- [ ] Wire Buildings tab to real construction actions\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:41.097371749+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:41.097371749+01:00","dependencies":[{"issue_id":"vibex-91a.11","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:41.104401487+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.11","depends_on_id":"vibex-91a.13","type":"blocks","created_at":"2026-02-15T15:49:30.37065618+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.12","title":"US-011: Create Unit Schema and Context","description":"As a developer, I want a Unit schema so that player armies can be stored.\n\n## Acceptance Criteria\n- [ ] Create `Vibex.Units.Unit` schema with `settlement_id`, `type`, `count`\n- [ ] Create `Vibex.Units` context module\n- [ ] Add migration for `units` table\n- [ ] Unit type is an Ecto enum with militia, swordsman, archer, mage\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:41.103918035+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:41.103918035+01:00","dependencies":[{"issue_id":"vibex-91a.12","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:41.107038635+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.12","depends_on_id":"vibex-91a.9","type":"blocks","created_at":"2026-02-15T15:49:30.010646941+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.12","depends_on_id":"vibex-91a.7","type":"blocks","created_at":"2026-02-15T15:49:30.276504917+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.13","title":"US-010: Create Building Schema and Context","description":"As a developer, I want a Building schema so that settlement structures can be stored.\n\n## Acceptance Criteria\n- [ ] Create `Vibex.Buildings.Building` schema with `settlement_id`, `type`, `level`, `position` (tuple {row, col})\n- [ ] Create `Vibex.Buildings` context module\n- [ ] Add migration for `buildings` table with position as composite type or two columns\n- [ ] Building type is an Ecto enum with all building types defined\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:41.111198557+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:41.111198557+01:00","dependencies":[{"issue_id":"vibex-91a.13","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:41.11412095+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.13","depends_on_id":"vibex-91a.9","type":"blocks","created_at":"2026-02-15T15:49:29.913611353+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.13","depends_on_id":"vibex-91a.7","type":"blocks","created_at":"2026-02-15T15:49:30.186504542+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.14","title":"US-014: Implement Building Upgrades","description":"As a player, I want to upgrade buildings so that production increases.\n\n## Acceptance Criteria\n- [ ] Add `upgrade/2` to SettlementServer (user_id, building_id)\n- [ ] Upgrade cost formula: `base_cost × 1.8^(level - 1)`\n- [ ] Upgrade deducts resources\n- [ ] Upgrade fails if insufficient resources or at max level (10)\n- [ ] Building level capped at Town Hall level + 2 (except Town Hall itself)\n- [ ] Town Hall upgrades require stage-specific prerequisites (see Stage Unlocks table)\n- [ ] Wire Buildings tab upgrade modal to real actions\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:47:08.879994683+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:47:08.879994683+01:00","dependencies":[{"issue_id":"vibex-91a.14","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:47:08.883785744+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.14","depends_on_id":"vibex-91a.11","type":"blocks","created_at":"2026-02-15T15:49:30.456642475+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.15","title":"US-015: Implement Unit Recruitment","description":"As a player, I want to recruit units so that I can build an army.\n\n## Acceptance Criteria\n- [ ] Add `recruit/3` to SettlementServer (user_id, unit_type, count)\n- [ ] Recruitment deducts resources per unit cost\n- [ ] Recruitment fails if insufficient resources\n- [ ] Recruitment fails if unit type not unlocked\n- [ ] Units stack by type (increment count, not new records)\n- [ ] Wire Units tab to real recruitment actions\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:47:08.883808545+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:47:08.883808545+01:00","dependencies":[{"issue_id":"vibex-91a.15","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:47:08.890164415+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.15","depends_on_id":"vibex-91a.12","type":"blocks","created_at":"2026-02-15T15:49:30.546117016+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.16","title":"US-016: Seed Story Missions","description":"As a developer, I want predetermined missions so players have early-game content.\n\n## Acceptance Criteria\n- [ ] Create priv/repo/seeds.exs with story missions (count TBD)\n- [ ] Missions span tiers 1-5\n- [ ] Each mission has name, tier, duration, rewards, difficulty\n- [ ] `mix run priv/repo/seeds.exs` populates missions table\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:47:08.889827116+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:47:08.889827116+01:00","dependencies":[{"issue_id":"vibex-91a.16","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:47:08.8928012+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.16","depends_on_id":"vibex-91a.10","type":"blocks","created_at":"2026-02-15T15:49:30.627963831+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.17","title":"US-017: Implement Mission System","description":"As a player, I want to send units on missions so that I earn rewards.\n\n## Acceptance Criteria\n- [ ] Add `start_mission/3` to SettlementServer (user_id, mission_id, units)\n- [ ] Mission assignment creates MissionAssignment record\n- [ ] Units become unavailable during mission\n- [ ] `resolve_mission/2` calculates success/failure based on attack power\n- [ ] On success: full rewards granted\n- [ ] On failure: partial rewards, 10-30% unit losses\n- [ ] Wire Missions tab to real mission actions\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:47:08.896764673+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:47:08.896764673+01:00","dependencies":[{"issue_id":"vibex-91a.17","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:47:08.900355115+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.17","depends_on_id":"vibex-91a.16","type":"blocks","created_at":"2026-02-15T15:49:30.728260761+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.17","depends_on_id":"vibex-91a.10","type":"blocks","created_at":"2026-02-15T15:49:30.822873226+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.17","depends_on_id":"vibex-91a.15","type":"blocks","created_at":"2026-02-15T15:49:30.91880828+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.18","title":"US-020: Add Stage Advancement Notifications","description":"As a player, I want to be notified when I advance stages so that I know what I unlocked.\n\n## Acceptance Criteria\n- [ ] Display notification modal when stage advances\n- [ ] Modal shows new stage number and unlocked features\n- [ ] Modal dismissable by user action\n- [ ] Smoke test: verify notification appears on stage advancement\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n**Done:** Fully playable end-to-end from new user to stage 5.","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:47:59.448700469+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:47:59.448700469+01:00","dependencies":[{"issue_id":"vibex-91a.18","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:47:59.451537415+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.18","depends_on_id":"vibex-91a.20","type":"blocks","created_at":"2026-02-15T15:49:42.835387692+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.19","title":"US-018: Implement Progression System","description":"As a developer, I want a progression system so that features unlock as the player advances.\n\n## Acceptance Criteria\n- [ ] Create `Vibex.Progression` module\n- [ ] Implement stage unlock conditions for stages 2-5\n- [ ] `check_progression/1` returns `{:advance, new_stage}` or `:no_change`\n- [ ] Stage 2: Town Hall level \u003e= 2 AND total production \u003e= 50\n- [ ] Stage 3: Town Hall level \u003e= 3 AND has Barracks AND militia count \u003e= 10\n- [ ] Stage 4: Town Hall level \u003e= 4 AND has Iron Forge AND iron production \u003e= 20 AND has Watchtower\n- [ ] Stage 5: Town Hall level \u003e= 5 AND completed missions \u003e= 5\n- [ ] Lock/unlock UI elements based on stage\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n**Checkpoint 3 Reached:** All tabs functional, can build, recruit, and complete missions.","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:47:59.45177856+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:47:59.45177856+01:00","dependencies":[{"issue_id":"vibex-91a.19","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:47:59.457013277+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.19","depends_on_id":"vibex-91a.14","type":"blocks","created_at":"2026-02-15T15:49:42.451662708+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.19","depends_on_id":"vibex-91a.15","type":"blocks","created_at":"2026-02-15T15:49:42.553050114+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.19","depends_on_id":"vibex-91a.17","type":"blocks","created_at":"2026-02-15T15:49:42.657375461+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.2","title":"US-002: Create Buildings Tab (Mock)","description":"As a player, I want to see a building grid so that I can visualize my settlement layout.\n\n## Acceptance Criteria\n- [ ] Display 6x6 building grid in SettlementLive\n- [ ] Empty slots show placeholder\n- [ ] Occupied slots show building type and level (from mock data)\n- [ ] Click handlers log to console (no real actions yet)\n- [ ] Smoke test: verify grid renders with mock buildings\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n## Mock Data\n```elixir\n%{\n  buildings: [\n    %{id: 1, type: :town_hall, level: 1, position: {1, 1}},\n    %{id: 2, type: :farm, level: 2, position: {1, 2}},\n    %{id: 3, type: :lumber_mill, level: 1, position: {2, 1}},\n    %{id: 4, type: :quarry, level: 1, position: {2, 2}}\n  ],\n  grid_size: {6, 6}\n}\n```","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:45:42.907980387+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:45:42.907980387+01:00","dependencies":[{"issue_id":"vibex-91a.2","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:45:42.911030004+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.2","depends_on_id":"vibex-91a.1","type":"blocks","created_at":"2026-02-15T15:48:38.838638431+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.20","title":"US-019: Initialize New Player Settlement","description":"As a new player, I want a starter settlement so that I can begin playing.\n\n## Acceptance Criteria\n- [ ] New users get settlement created automatically on first login\n- [ ] Settlement starts with 500 of each basic resource (gold, wood, stone, food)\n- [ ] Settlement starts at progression stage 1\n- [ ] Settlement starts with base storage capacity (500 each)\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:47:59.460592707+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:47:59.460592707+01:00","dependencies":[{"issue_id":"vibex-91a.20","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:47:59.462580617+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.20","depends_on_id":"vibex-91a.19","type":"blocks","created_at":"2026-02-15T15:49:42.748966535+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.3","title":"US-003: Create Units Tab (Mock)","description":"As a player, I want to see my army so that I know what units I have.\n\n## Acceptance Criteria\n- [ ] Display current mock unit counts by type\n- [ ] Display mock recruitment panel with unit types\n- [ ] Show unit cost and stats (hardcoded)\n- [ ] Recruit buttons visible but non-functional (log to console)\n- [ ] Smoke test: verify unit display, recruitment panel\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n## Mock Data\n```elixir\n%{\n  units: %{militia: 10, swordsman: 0, archer: 0, mage: 0},\n  unit_stats: %{\n    militia: %{attack: 5, defense: 3, cost: %{gold: 50, food: 20}},\n    swordsman: %{attack: 15, defense: 12, cost: %{gold: 80, iron: 30}},\n    archer: %{attack: 12, defense: 5, cost: %{gold: 60, iron: 20, wood: 15}},\n    mage: %{attack: 25, defense: 8, cost: %{gold: 150, crystal: 40}}\n  }\n}\n```","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:45:42.916489263+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:45:42.916489263+01:00","dependencies":[{"issue_id":"vibex-91a.3","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:45:42.924088102+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.3","depends_on_id":"vibex-91a.1","type":"blocks","created_at":"2026-02-15T15:48:38.919374699+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.4","title":"US-005: Add Tab Navigation","description":"As a player, I want to navigate between tabs so that I can access all game features.\n\n## Acceptance Criteria\n- [ ] Add tab bar with Overview, Buildings, Units, Missions\n- [ ] Active tab is visually highlighted\n- [ ] Tab state persists in LiveView assigns\n- [ ] Navigation works without page reload\n- [ ] Smoke test: verify all tabs are clickable and switch content\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n**Checkpoint 1 Reached:** All UI visible with mock data, can navigate between tabs.","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:45:42.923124119+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:45:42.923124119+01:00","dependencies":[{"issue_id":"vibex-91a.4","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:45:42.926115577+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.4","depends_on_id":"vibex-91a.2","type":"blocks","created_at":"2026-02-15T15:48:39.093377697+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.4","depends_on_id":"vibex-91a.3","type":"blocks","created_at":"2026-02-15T15:48:39.180055313+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.4","depends_on_id":"vibex-91a.5","type":"blocks","created_at":"2026-02-15T15:48:39.27854473+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.5","title":"US-004: Create Missions Tab (Mock)","description":"As a player, I want to see available missions so that I can plan my activities.\n\n## Acceptance Criteria\n- [ ] Display mock available missions list with name, tier, duration, rewards\n- [ ] Display mock active missions with countdown timers (static)\n- [ ] Mission selection shows mock unit assignment interface\n- [ ] Start mission button logs to console (no real actions)\n- [ ] Smoke test: verify mission list, assignment interface\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n## Mock Data\n```elixir\n%{\n  available_missions: [\n    %{id: 1, name: \"Patrol the Woods\", tier: 1, duration_seconds: 300, rewards: %{gold: 200}, min_units: 5, difficulty: 1.0},\n    %{id: 2, name: \"Clear the Mine\", tier: 1, duration_seconds: 420, rewards: %{gold: 150, iron: 50}, min_units: 8, difficulty: 1.2}\n  ],\n  active_missions: [\n    %{id: 3, name: \"Scout the Hills\", tier: 1, completes_at: ~U[2026-02-13 12:00:00Z], units: %{militia: 5}}\n  ]\n}\n```\n\nNote: Mission content is placeholder for MVP. Count and specifics TBD.","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:45:42.930476804+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:45:42.930476804+01:00","dependencies":[{"issue_id":"vibex-91a.5","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:45:42.960408704+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.5","depends_on_id":"vibex-91a.1","type":"blocks","created_at":"2026-02-15T15:48:39.00588687+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.6","title":"US-008: Implement Resource Calculation","description":"As a developer, I want resources to accumulate over time based on production buildings.\n\n## Acceptance Criteria\n- [ ] Implement `production_rate/2` function calculating rate from buildings\n- [ ] Implement `current_resources/1` calculating accumulated resources from `last_calculated_at`\n- [ ] Resources cap at `storage_capacity`\n- [ ] `last_calculated_at` updates on resource fetch\n- [ ] Production formula: `base × 1.5^(level - 1)`\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:14.45667605+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:14.45667605+01:00","dependencies":[{"issue_id":"vibex-91a.6","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:14.459651936+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.6","depends_on_id":"vibex-91a.8","type":"blocks","created_at":"2026-02-15T15:48:56.162116808+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.7","title":"US-006: Create Settlement Context and Schema","description":"As a developer, I want a Settlement schema with resources and storage fields so that player state can be persisted.\n\n## Acceptance Criteria\n- [ ] Create `Vibex.Settlements.Settlement` schema with `user_id`, `resources` (map), `storage_capacity` (map), `last_calculated_at`, `progression_stage`\n- [ ] Create `Vibex.Settlements` context module\n- [ ] Add migration for `settlements` table\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:14.464149836+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:14.464149836+01:00","dependencies":[{"issue_id":"vibex-91a.7","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:14.468098548+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.8","title":"US-007: Implement SettlementServer GenServer","description":"As a developer, I want a GenServer to manage settlement state so that resources can be calculated in real-time.\n\n## Acceptance Criteria\n- [ ] Create `Vibex.SettlementServer` GenServer\n- [ ] Implement `get_or_create/1` that spawns or returns existing server\n- [ ] Implement `state/1` to get current calculated state\n- [ ] Server uses Registry for process lookup by user_id\n- [ ] Server loads state from database on start\n- [ ] Add SettlementRegistry to application supervision tree\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:14.472596035+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:14.472596035+01:00","dependencies":[{"issue_id":"vibex-91a.8","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:14.475962405+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.8","depends_on_id":"vibex-91a.7","type":"blocks","created_at":"2026-02-15T15:48:56.068549049+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-91a.9","title":"US-009: Route SettlementLive with Authentication","description":"As a player, I want the game to be at the root path so that I can start playing immediately after login.\n\n## Acceptance Criteria\n- [ ] Add SettlementLive to router at `/`\n- [ ] Place in `live_session :require_authenticated_user`\n- [ ] Unauthenticated users redirected to login\n- [ ] Authenticated users see their settlement\n- [ ] Wire Overview tab to real SettlementServer state\n- [ ] Resources update every second via `:tick` message\n- [ ] Smoke test: verify redirect for unauthenticated, game loads for authenticated\n- [ ] `mix test` passes\n- [ ] `mix credo --strict` passes\n\n**Checkpoint 2 Reached:** Overview tab shows real resources with live tick updates.","status":"open","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-15T15:46:14.480810852+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-15T15:46:14.480810852+01:00","dependencies":[{"issue_id":"vibex-91a.9","depends_on_id":"vibex-91a","type":"parent-child","created_at":"2026-02-15T15:46:14.484530801+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.9","depends_on_id":"vibex-91a.6","type":"blocks","created_at":"2026-02-15T15:48:56.248638216+01:00","created_by":"Jakub Kaláb"},{"issue_id":"vibex-91a.9","depends_on_id":"vibex-91a.4","type":"blocks","created_at":"2026-02-15T15:48:56.334918111+01:00","created_by":"Jakub Kaláb"}]}
{"id":"vibex-e3w","title":"Standard LiveView Authentication","description":"Implement standard Phoenix 1.8 authentication using `phx.gen.auth` generator for a fresh Phoenix LiveView application. The system will use magic link authentication as the primary method with email/password as an optional alternative, including full password reset functionality.","status":"tombstone","priority":2,"issue_type":"epic","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T21:20:45.315669054+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"All acceptance criteria verified for account confirmation flow. Standard phx.gen.auth implementation working correctly.","external_ref":"prd:./tasks/standard-liveview-auth-prd.md","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"vibex-e3w.1","title":"US-001: Generate auth scaffold with phx.gen.auth","description":"As a developer, I want to run `phx.gen.auth` with both magic link and password support so that I have a complete auth foundation.\n\n## Acceptance Criteria\n- [ ] Run `mix phx.gen.auth Accounts User users` with appropriate flags for magic link + password\n- [ ] Generated files compile without errors\n- [ ] Migration runs successfully\n- [ ] `mix test` passes after generation\n- [ ] `mix credo` passes","status":"tombstone","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T21:20:56.08520737+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Generated auth scaffold with phx.gen.auth --live. All acceptance criteria met: compiles, migration runs, 111 tests pass, precommit passes.","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-e3w.2","title":"US-002: Configure email delivery for magic links","description":"As a user, I want to receive magic link emails so that I can authenticate without a password.\n\n## Acceptance Criteria\n- [ ] Email adapter configured (use Swoosh with Local adapter for dev)\n- [ ] Magic link emails send successfully in development\n- [ ] Email templates render correctly\n- [ ] `mix test` passes\n- [ ] `mix credo` passes","status":"tombstone","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T21:20:58.877818072+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Verified: Swoosh Local adapter configured, magic link emails send successfully in dev, mailbox preview at /dev/mailbox works. mix test (111 tests pass), mix credo (only @moduledoc warnings from phx.gen.auth).","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-e3w.3","title":"US-003: Verify magic link authentication flow","description":"As a user, I want to log in via magic link so that I can access my account without remembering a password.\n\n## Acceptance Criteria\n- [ ] User can request magic link from login page\n- [ ] Magic link email is received\n- [ ] Clicking magic link authenticates the user\n- [ ] Magic link expires after use or after configured timeout\n- [ ] User is redirected to appropriate page after authentication\n- [ ] `mix test` passes\n- [ ] `mix credo` passes","status":"tombstone","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T21:21:01.831199047+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Verified all acceptance criteria. Magic link flow working correctly. Fixed missing @moduledoc in 4 files to satisfy credo.","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-e3w.4","title":"US-004: Verify email/password authentication flow","description":"As a user, I want to log in with email and password so that I have an alternative to magic links.\n\n## Acceptance Criteria\n- [ ] User can register with email and password\n- [ ] Password confirmation field validates match\n- [ ] User can log in with email and password\n- [ ] Invalid credentials show appropriate error message\n- [ ] Remember me checkbox extends session\n- [ ] `mix test` passes\n- [ ] `mix credo` passes","status":"tombstone","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T21:21:04.665364546+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Verified all acceptance criteria: email/password login works via POST to /users/log-in with email and password fields. Tests cover valid login, invalid credentials error message, remember_me cookie. Passwords set via Settings page after initial magic-link registration. 111 tests pass, credo clean.","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-e3w.5","title":"US-005: Verify password reset flow","description":"As a user, I want to reset my password so that I can regain access if I forget it.\n\n## Acceptance Criteria\n- [ ] `mix test` passes\n- [ ] `mix credo` passes\n\nNote: Password reset implementation tracked in vibex-ypr","status":"tombstone","priority":3,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T21:21:07.513230517+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"VERIFIED - Password reset flow is covered by existing magic link login: user requests magic link via /users/log-in, receives email with login link, logs in, then changes password in /users/settings. mix test passes (111/111).","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-e3w.6","title":"US-006: Verify account confirmation","description":"As a user, I want to confirm my email address so that my account is verified.\n\n## Acceptance Criteria\n- [ ] New registrations receive confirmation email\n- [ ] Confirmation link validates email\n- [ ] Unconfirmed accounts have restricted access (if configured)\n- [ ] Confirmation link expires appropriately\n- [ ] `mix test` passes\n- [ ] `mix credo` passes","status":"tombstone","priority":3,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T21:21:10.397653642+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Verified all acceptance criteria. Implementation follows phx.gen.auth magic link pattern: registration triggers confirmation email, magic link confirms account + logs in simultaneously. Token expires in 15 minutes, one-time use. Tests and credo pass.","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-ypr","title":"Implement password reset functionality","description":"Implement password reset functionality for users who forgot their password.\n\n## Implementation\n- Add `deliver_user_reset_password_instructions/2` to Accounts context\n- Add `get_user_by_reset_password_token/1` to Accounts context\n- Add `reset_user_password/2` to Accounts context\n- Create UserLive.ForgotPassword LiveView\n- Create UserLive.ResetPassword LiveView\n- Add routes for /users/forgot-password and /users/reset-password\n- Add password reset email template\n\n## Acceptance Criteria\n- [ ] User can request password reset email\n- [ ] Password reset email contains valid reset link\n- [ ] Reset link allows setting new password\n- [ ] Reset link expires after use or timeout\n- [ ] New password is required to meet security requirements\n- [ ] `mix test` passes\n- [ ] `mix credo` passes","status":"tombstone","priority":2,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-11T22:26:37.969496409+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Not needed - password reset flow is covered by magic link login + password change in settings","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-zhp","title":"Initialize Phoenix Project","description":"Bootstrap a new Elixir Phoenix application within the current working directory (`vibex`). The project should utilize standard defaults including LiveView for the frontend and PostgreSQL for the database.","status":"tombstone","priority":2,"issue_type":"epic","owner":"jakubkalab@gmail.com","created_at":"2026-02-09T15:20:18.247214362+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"All children completed","external_ref":"prd:./tasks/prd-product-requirements-document-initialize-phoenix-project.md","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"vibex-zhp.1","title":"Generate Phoenix Application","description":"**As a** developer\n**I want to** generate the Phoenix application structure in the current directory\n**So that** I have the foundation for the `vibex` project without creating a nested directory.\n\n## Description\nExecute the Phoenix generator configured for a full HTML/LiveView app with PostgreSQL, targeting the current directory (`.`).\nTechnical Notes: Use `mix phx.new . --app vibex`.\n\n## Acceptance Criteria\n- [ ] `mix.exs` is created in the project root.\n- [ ] `lib/vibex` and `lib/vibex_web` directories exist.\n- [ ] `assets` directory exists.\n- [ ] PostgreSQL is configured as the database adapter in `config/`.","status":"tombstone","priority":0,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-09T15:20:28.694715255+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Completed by agent","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"vibex-zhp.2","title":"Verify Project Health","description":"**As a** developer\n**I want to** run the standard test and format checks\n**So that** I know the generated project is healthy and ready for development.\n\n## Description\nInstall dependencies and run the project's verification commands.\n\n## Acceptance Criteria\n- [ ] `mix deps.get` runs successfully.\n- [ ] `mix test` passes with 0 failures.\n- [ ] `mix format --check-formatted` exits successfully (code is formatted).","status":"tombstone","priority":1,"issue_type":"task","owner":"jakubkalab@gmail.com","created_at":"2026-02-09T15:20:35.164327083+01:00","created_by":"Jakub Kaláb","updated_at":"2026-02-12T07:35:54.80636175+01:00","close_reason":"Completed by agent","deleted_at":"2026-02-12T07:35:54.80636175+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
